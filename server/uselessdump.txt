
async function importBusinesses() {
  try {
    // Read the data from the file
    const rawData = fs.readFileSync("data.json");
    const data = JSON.parse(rawData);
    let count = 0;

    // Iterate over each object in the array
    for (const business of data) {
      const avatar = business.imgSrcset.split(", ")[0].split(" ")[0];
      const rating = business.starRating;
      const title = business.title;
      const location = business.primaryLocation;
      const phone = business.phoneNumber;
      const description = business.about;
      const banner_image = business.backgroundImg;
      const email = "";
      const website_link = "";

      if (avatar.includes("https://images.leafly.com/")) {
        console.log(
          "The imgSrcset link contains 'https://images.leafly.com/, SKIPPING'."
        );
      } else {
        count++;

        const user = new User({
          username: "NA",
          password: "temp123^@&#@*#*",
          email: email,
          fullname: "NA",
          date_of_birth: null,
          user_type: "business",
        });

        await user.save();

        const business = new Business({
          user_id: user._id,
          title: title,
          description: description,
          website_link: website_link,
          location: location,
          email: email,
          phone: phone,
          products: [],
          instore_purchasing: false,
          business_type: [],
          banner_image: banner_image,
          avatar: avatar,
          deals: [],
          reviews: [],
          filters: [],
          registration_date: Date.now(),
          followers: [],
          opening_hours: [],
          claimed: false,
        });

        await business.save();
      }
    }
    console.log("-------------------");
    console.log("Total businesses imported:", count);
    console.log("-------------------");
  } catch (error) {
    console.error("Error reading file:", error);
  }
}